<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Profiling Considerations
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="search-profile.html" title="Profile API" /><link rel="prev" href="_profiling_aggregations.html" title="Profiling Aggregations" /><link rel="next" href="search-field-stats.html" title="Field stats API" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/master" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span> » <span class="breadcrumb-link"><a href="search-profile.html">Profile API</a></span> » <span class="breadcrumb-node">Profiling Considerations</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_profiling_aggregations.html">
              « 
              Profiling Aggregations</a>
           
        </span><span class="next">
           
          <a href="search-field-stats.html">Field stats API
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_profiling_considerations"></a>Profiling Considerations<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/profile.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_performance_notes"></a>Performance Notes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/profile.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Like any profiler, the Profile API introduces a non-negligible overhead to search execution.  The act of instrumenting
low-level method calls such as <code class="literal">collect</code>, <code class="literal">advance</code> and <code class="literal">next_doc</code> can be fairly expensive, since these methods are called
in tight loops.  Therefore, profiling should not be enabled in production settings by default, and should not
be compared against non-profiled query times.  Profiling is just a diagnostic tool.</p><p>There are also cases where special Lucene optimizations are disabled, since they are not amenable to profiling.  This
could cause some queries to report larger relative times than their non-profiled counterparts, but in general should
not have a drastic effect compared to other components in the profiled query.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_limitations"></a>Limitations<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/search/profile.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Profiling statistics are currently not available for suggestions, highlighting, <code class="literal">dfs_query_then_fetch</code>
</li><li class="listitem">
Profiling of the reduce phase of aggregation is currently not available
</li><li class="listitem">
The Profiler is still highly experimental. The Profiler is instrumenting parts of Lucene that were
never designed to be exposed in this manner, and so all results should be viewed as a best effort to provide detailed
diagnostics.  We hope to improve this over time. If you find obviously wrong numbers, strange query structures or
other bugs, please report them!
</li></ul></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_profiling_aggregations.html">
              « 
              Profiling Aggregations</a>
           
        </span><span class="next">
           
          <a href="search-field-stats.html">Field stats API
               »
            </a></span></div></body></html>