<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Task Management API
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="cluster.html" title="Cluster APIs" /><link rel="prev" href="cluster-nodes-info.html" title="Nodes Info" /><link rel="next" href="cluster-nodes-hot-threads.html" title="Nodes hot_threads" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/master" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span> » <span class="breadcrumb-node">Task Management API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="cluster-nodes-info.html">
              « 
              Nodes Info</a>
           
        </span><span class="next">
           
          <a href="cluster-nodes-hot-threads.html">Nodes hot_threads
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="tasks"></a>Task Management API<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/tasks.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content">
The Task Management API is new and should still be considered experimental.  The API may change in ways that are not backwards compatible
</div></div><h3><a id="_current_tasks_information"></a>Current Tasks Information<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/tasks.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The task management API allows to retrieve information about the tasks currently
executing on one or more nodes in the cluster.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks <a id="CO134-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span>
GET _tasks?nodes=nodeId1,nodeId2 <a id="CO134-2"></a><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span>
GET _tasks?nodes=nodeId1,nodeId2&amp;actions=cluster:* <a id="CO134-3"></a><span xmlns=""><img src="images/icons/callouts/3.png" alt="" /></span></pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Retrieves all tasks currently running on all nodes in the cluster.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-2"><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Retrieves all tasks running on nodes <code class="literal">nodeId1</code> and <code class="literal">nodeId2</code>.  See <a class="xref" href="cluster.html#cluster-nodes" title="Node specificationedit">the section called “Node specification<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a>”</a> for more info about how to select individual nodes.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO134-3"><span xmlns=""><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
Retrieves all cluster-related tasks running on nodes <code class="literal">nodeId1</code> and <code class="literal">nodeId2</code>.
</p></td></tr></table></div><p>The result will look similar to the following:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "nodes" : {
    "oTUltX4IQMOUUVeiohTt8A" : {
      "name" : "H5dfFeA",
      "transport_address" : "127.0.0.1:9300",
      "host" : "127.0.0.1",
      "ip" : "127.0.0.1:9300",
      "tasks" : {
        "oTUltX4IQMOUUVeiohTt8A:124" : {
          "node" : "oTUltX4IQMOUUVeiohTt8A",
          "id" : 124,
          "type" : "direct",
          "action" : "cluster:monitor/tasks/lists[n]",
          "start_time_in_millis" : 1458585884904,
          "running_time_in_nanos" : 47402,
          "cancellable" : false,
          "parent_task_id" : "oTUltX4IQMOUUVeiohTt8A:123"
        },
        "oTUltX4IQMOUUVeiohTt8A:123" : {
          "node" : "oTUltX4IQMOUUVeiohTt8A",
          "id" : 123,
          "type" : "transport",
          "action" : "cluster:monitor/tasks/lists",
          "start_time_in_millis" : 1458585884904,
          "running_time_in_nanos" : 236042,
          "cancellable" : false
        }
      }
    }
  }
}</pre></div><p>It is also possible to retrieve information for a particular task:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks/task_id:1 <a id="CO135-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO135-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This will return a 404 if the task isn’t found.
</p></td></tr></table></div><p>Or to retrieve all children of a particular task:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks?parent_task_id=parentTaskId:1 <a id="CO136-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO136-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
This won’t return a 404 if the parent isn’t found.
</p></td></tr></table></div><p>You can also use the <code class="literal">detailed</code> request parameter to get more information about
the running tasks. This is useful for telling one task from another but is more
costly to execute. For example, fetching all searches using the <code class="literal">detailed</code>
request parameter:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks?actions=*search&amp;detailed</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>might look like:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "nodes" : {
    "oTUltX4IQMOUUVeiohTt8A" : {
      "name" : "H5dfFeA",
      "transport_address" : "127.0.0.1:9300",
      "host" : "127.0.0.1",
      "ip" : "127.0.0.1:9300",
      "tasks" : {
        "oTUltX4IQMOUUVeiohTt8A:464" : {
          "node" : "oTUltX4IQMOUUVeiohTt8A",
          "id" : 464,
          "type" : "transport",
          "action" : "indices:data/read/search",
          "description" : "indices[test], types[test], search_type[QUERY_THEN_FETCH], source[{\"query\":...}]",
          "start_time_in_millis" : 1483478610008,
          "running_time_in_nanos" : 13991383,
          "cancellable" : true
        }
      }
    }
  }
}</pre></div><p>The new <code class="literal">description</code> field contains human readable text that identifies the
particular request that the task is performing such as identifying the search
request being performed by a search task like the example above. Other kinds of
task have have different descriptions, like <a class="link" href="docs-reindex.html" title="Reindex API"><code class="literal">_reindex</code></a> which
has the search and the destination, or <a class="link" href="docs-bulk.html" title="Bulk API"><code class="literal">_bulk</code></a> which just has the
number of requests and the destination indices. Many requests will only have an
empty description because more detailed information about the request is not
easily available or particularly helpful in identifying the request.</p><p>The task API can also be used to wait for completion of a particular task. The
following call will block for 10 seconds or until the task with id
<code class="literal">oTUltX4IQMOUUVeiohTt8A:12345</code> is completed.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks/oTUltX4IQMOUUVeiohTt8A:12345?wait_for_completion=true&amp;timeout=10s</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>You can also wait for all tasks for certain action types to finish. This
command will wait for all <code class="literal">reindex</code> tasks to finish:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks?actions=*reindex&amp;wait_for_completion=true&amp;timeout=10s</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>Tasks can be also listed using _cat version of the list tasks command, which
accepts the same arguments as the standard list tasks command.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _cat/tasks
GET _cat/tasks?detailed</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h3><a id="task-cancellation"></a>Task Cancellation<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/tasks.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>If a long-running task supports cancellation, it can be cancelled by the following command:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">POST _tasks/task_id:1/_cancel</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The task cancellation command supports the same task selection parameters as the list tasks command, so multiple tasks
can be cancelled at the same time. For example, the following command will cancel all reindex tasks running on the
nodes <code class="literal">nodeId1</code> and <code class="literal">nodeId2</code>.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">POST _tasks/_cancel?nodes=nodeId1,nodeId2&amp;actions=*reindex</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h3><a id="_task_grouping"></a>Task Grouping<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/cluster/tasks.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The task lists returned by task API commands can be grouped either by nodes (default) or by parent tasks using the <code class="literal">group_by</code> parameter.
The following command will change the grouping to parent tasks:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET _tasks?group_by=parents</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="cluster-nodes-info.html">
              « 
              Nodes Info</a>
           
        </span><span class="next">
           
          <a href="cluster-nodes-hot-threads.html">Nodes hot_threads
               »
            </a></span></div></body></html>