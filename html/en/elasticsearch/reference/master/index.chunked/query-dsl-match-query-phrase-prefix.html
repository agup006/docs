<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Match Phrase Prefix Query
        | Elasticsearch Reference [master]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [master]" /><link rel="up" href="full-text-queries.html" title="Full text queries" /><link rel="prev" href="query-dsl-match-query-phrase.html" title="Match Phrase Query" /><link rel="next" href="query-dsl-multi-match-query.html" title="Multi Match Query" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/master" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [master]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="full-text-queries.html">Full text queries</a></span> » <span class="breadcrumb-node">Match Phrase Prefix Query</span></div><div xmlns="" class="navheader"><span class="prev"><a href="query-dsl-match-query-phrase.html">
              « 
              Match Phrase Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-multi-match-query.html">Multi Match Query
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-match-query-phrase-prefix"></a>Match Phrase Prefix Query<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/master/docs/reference/query-dsl/match-phrase-prefix-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <code class="literal">match_phrase_prefix</code> is the same as <code class="literal">match_phrase</code>, except that it
allows for prefix matches on the last term in the text. For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "match_phrase_prefix" : {
            "message" : "quick brown f"
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>It accepts the same parameters as the phrase type. In addition, it also
accepts a <code class="literal">max_expansions</code> parameter (default <code class="literal">50</code>) that can control to how
many prefixes the last term will be expanded. It is highly recommended to set
it to an acceptable value to control the execution time of the query. For
example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "match_phrase_prefix" : {
            "message" : {
                "query" : "quick brown f",
                "max_expansions" : 10
            }
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">The <code class="literal">match_phrase_prefix</code> query is a poor-man’s autocomplete.  It is very easy
to use, which let’s you get started quickly with <span class="emphasis"><em>search-as-you-type</em></span> but it’s
results, which usually are good enough,  can sometimes be confusing.</p><p xmlns="http://www.w3.org/1999/xhtml">Consider the query string <code class="literal">quick brown f</code>.  This query works by creating a
phrase query out of <code class="literal">quick</code> and <code class="literal">brown</code> (i.e. the term <code class="literal">quick</code> must exist and
must be followed by the term <code class="literal">brown</code>).  Then it looks at the sorted term
dictionary to find the first 50 terms that begin with <code class="literal">f</code>, and
adds these terms to the phrase query.</p><p xmlns="http://www.w3.org/1999/xhtml">The problem is that the first 50 terms may not include the term <code class="literal">fox</code> so the
phase <code class="literal">quick brown fox</code> will not be found.  This usually isn’t a problem as
the user will continue to type more letters until the word they are looking
for appears.</p><p xmlns="http://www.w3.org/1999/xhtml">For better solutions for <span class="emphasis"><em>search-as-you-type</em></span> see the
<a class="link" href="search-suggesters-completion.html" title="Completion Suggester">completion suggester</a> and
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/master/_index_time_search_as_you_type.html" target="_top">Index-Time Search-as-You-Type</a>.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="query-dsl-match-query-phrase.html">
              « 
              Match Phrase Query</a>
           
        </span><span class="next">
           
          <a href="query-dsl-multi-match-query.html">Multi Match Query
               »
            </a></span></div></body></html>