<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Simple Query String Query
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="full-text-queries.html" title="Full text queries" /><link rel="prev" href="query-dsl-query-string-query.html" title="Query String Query" /><link rel="next" href="term-level-queries.html" title="Term level queries" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span> » <span class="breadcrumb-link"><a href="full-text-queries.html">Full text queries</a></span> » <span class="breadcrumb-node">Simple Query String Query</span></div><div xmlns="" class="navheader"><span class="prev"><a href="query-dsl-query-string-query.html">
              « 
              Query String Query</a>
           
        </span><span class="next">
           
          <a href="term-level-queries.html">Term level queries
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-simple-query-string-query"></a>Simple Query String Query<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/query-dsl/simple-query-string-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>A query that uses the SimpleQueryParser to parse its context. Unlike the
regular <code class="literal">query_string</code> query, the <code class="literal">simple_query_string</code> query will never
throw an exception, and discards invalid parts of the query. Here is
an example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
  "query": {
    "simple_query_string" : {
        "query": "\"fried eggs\" +(eggplant | potato) -frittata",
        "analyzer": "snowball",
        "fields": ["body^5","_all"],
        "default_operator": "and"
    }
  }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The <code class="literal">simple_query_string</code> top level parameters include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1" /><col class="col_2" /></colgroup><thead><tr><th align="left" valign="top">Parameter </th><th align="left" valign="top">Description</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">query</code></p></td><td align="left" valign="top"><p>The actual query to be parsed. See below for syntax.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">fields</code></p></td><td align="left" valign="top"><p>The fields to perform the parsed query against. Defaults to the
<code class="literal">index.query.default_field</code> index settings, which in turn defaults to <code class="literal">_all</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td align="left" valign="top"><p>The default operator used if no explicit operator
is specified. For example, with a default operator of <code class="literal">OR</code>, the query
<code class="literal">capital of Hungary</code> is translated to <code class="literal">capital OR of OR Hungary</code>, and
with default operator of <code class="literal">AND</code>, the same query is translated to
<code class="literal">capital AND of AND Hungary</code>. The default value is <code class="literal">OR</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td align="left" valign="top"><p>The analyzer used to analyze each term of the query when
creating composite queries.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">flags</code></p></td><td align="left" valign="top"><p>Flags specifying which features of the <code class="literal">simple_query_string</code> to
enable. Defaults to <code class="literal">ALL</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td align="left" valign="top"><p>Whether terms of prefix queries should be automatically
analyzed or not. If <code class="literal">true</code> a best effort will be made to analyze the prefix. However,
some analyzers will be not able to provide a meaningful results
based just on the prefix of a term. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">lenient</code></p></td><td align="left" valign="top"><p>If set to <code class="literal">true</code> will cause format based failures
(like providing text to a numeric field) to be ignored.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">minimum_should_match</code></p></td><td align="left" valign="top"><p>The minimum number of clauses that must match for a
 document to be returned. See the
 <a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a> documentation for the
 full list of options.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">quote_field_suffix</code></p></td><td align="left" valign="top"><p>A suffix to append to fields for quoted parts of
the query string. This allows to use a field that has a different analysis chain
for exact matching. Look <a class="link" href="recipes.html#mixing-exact-search-with-stemming" title="Mixing exact search with stemmingedit">here</a> for a
comprehensive example.</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">all_fields</code></p></td><td align="left" valign="top"><p>Perform the query on all fields detected in the mapping that can
be queried. Will be used by default when the <code class="literal">_all</code> field is disabled and no
<code class="literal">default_field</code> is specified index settings, and no <code class="literal">fields</code> are specified.</p></td></tr></tbody></table></div><h5><a id="_simple_query_string_syntax"></a>Simple Query String Syntax<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/query-dsl/simple-query-string-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h5><p>The <code class="literal">simple_query_string</code> supports the following special characters:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">+</code> signifies AND operation
</li><li class="listitem">
<code class="literal">|</code> signifies OR operation
</li><li class="listitem">
<code class="literal">-</code> negates a single token
</li><li class="listitem">
<code class="literal">"</code> wraps a number of tokens to signify a phrase for searching
</li><li class="listitem">
<code class="literal">*</code> at the end of a term signifies a prefix query
</li><li class="listitem">
<code class="literal">(</code> and <code class="literal">)</code> signify precedence
</li><li class="listitem">
<code class="literal">~N</code> after a word signifies edit distance (fuzziness)
</li><li class="listitem">
<code class="literal">~N</code> after a phrase signifies slop amount
</li></ul></div><p>In order to search for any of these special characters, they will need to
be escaped with <code class="literal">\</code>.</p><p>Be aware that this syntax may have a different behavior depending on the
<code class="literal">default_operator</code> value. For example, consider the following query:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "simple_query_string" : {
            "fields" : ["content"],
            "query" : "foo bar -baz"
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>You may expect that documents containing only "foo" or "bar" will be returned,
as long as they do not contain "baz", however, due to the <code class="literal">default_operator</code>
being OR, this really means "match documents that contain "foo" or documents
that contain "bar", or documents that don’t contain "baz". If this is unintended
then the query can be switched to <code class="literal">"foo bar +-baz"</code> which will not return
documents that contain "baz".</p><h4><a id="_default_field_2"></a>Default Field<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/query-dsl/simple-query-string-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>When not explicitly specifying the field to search on in the query
string syntax, the <code class="literal">index.query.default_field</code> will be used to derive
which field to search on. It defaults to <code class="literal">_all</code> field.</p><p>If the <code class="literal">_all</code> field is disabled and no <code class="literal">fields</code> are specified in the request`,
the <code class="literal">simple_query_string</code> query will automatically attempt to determine the
existing fields in the index’s mapping that are queryable, and perform the
search on those fields.</p><h4><a id="_multi_field_2"></a>Multi Field<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/query-dsl/simple-query-string-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p>The fields parameter can also include pattern based field names,
allowing to automatically expand to the relevant fields (dynamically
introduced fields included). For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "simple_query_string" : {
            "fields" : ["content", "name.*^5"],
            "query" : "foo bar baz"
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h4><a id="_flags"></a>Flags<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/query-dsl/simple-query-string-query.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h4><p><code class="literal">simple_query_string</code> support multiple flags to specify which parsing features
should be enabled. It is specified as a <code class="literal">|</code>-delimited string with the
<code class="literal">flags</code> parameter:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_search
{
    "query": {
        "simple_query_string" : {
            "query" : "foo | bar + baz*",
            "flags" : "OR|AND|PREFIX"
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The available flags are: <code class="literal">ALL</code>, <code class="literal">NONE</code>, <code class="literal">AND</code>, <code class="literal">OR</code>, <code class="literal">NOT</code>, <code class="literal">PREFIX</code>, <code class="literal">PHRASE</code>,
<code class="literal">PRECEDENCE</code>, <code class="literal">ESCAPE</code>, <code class="literal">WHITESPACE</code>, <code class="literal">FUZZY</code>, <code class="literal">NEAR</code>, and <code class="literal">SLOP</code>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="query-dsl-query-string-query.html">
              « 
              Query String Query</a>
           
        </span><span class="next">
           
          <a href="term-level-queries.html">Term level queries
               »
            </a></span></div></body></html>