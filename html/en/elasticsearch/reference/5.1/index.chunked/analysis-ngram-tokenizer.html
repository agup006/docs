<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">NGram Tokenizer
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="analysis-tokenizers.html" title="Tokenizers" /><link rel="prev" href="analysis-thai-tokenizer.html" title="Thai Tokenizer" /><link rel="next" href="analysis-edgengram-tokenizer.html" title="Edge NGram Tokenizer" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span> » <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span> » <span class="breadcrumb-node">NGram Tokenizer</span></div><div xmlns="" class="navheader"><span class="prev"><a href="analysis-thai-tokenizer.html">
              « 
              Thai Tokenizer</a>
           
        </span><span class="next">
           
          <a href="analysis-edgengram-tokenizer.html">Edge NGram Tokenizer
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-ngram-tokenizer"></a>NGram Tokenizer<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/analysis/tokenizers/ngram-tokenizer.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <code class="literal">ngram</code> tokenizer first breaks text down into words whenever it encounters
one of a list of specified characters, then it emits
<a class="ulink" href="https://en.wikipedia.org/wiki/N-gram" target="_top">N-grams</a> of each word of the specified
length.</p><p>N-grams are like a sliding window that moves across the word - a continuous
sequence of characters of the specified length. They are useful for querying
languages that don’t use spaces or that have long compound words, like German.</p><h3><a id="_example_output_15"></a>Example output<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/analysis/tokenizers/ngram-tokenizer.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>With the default settings, the <code class="literal">ngram</code> tokenizer treats the initial text as a
single token and produces N-grams with minimum length <code class="literal">1</code> and maximum length
<code class="literal">2</code>:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">POST _analyze
{
  "tokenizer": "ngram",
  "text": "Quick Fox"
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The above sentence would produce the following terms:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">[ Q, Qu, u, ui, i, ic, c, ck, k, "k ", " ", " F", F, Fo, o, ox, x ]</pre></div><h3><a id="_configuration_16"></a>Configuration<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/analysis/tokenizers/ngram-tokenizer.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The <code class="literal">ngram</code> tokenizer accepts the following parameters:</p><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">min_gram</code>
</p>
</td><td valign="top">
<p>
    Minimum length of characters in a gram.  Defaults to <code class="literal">1</code>.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">max_gram</code>
</p>
</td><td valign="top">
<p>
    Maximum length of characters in a gram.  Defaults to <code class="literal">2</code>.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">token_chars</code>
</p>
</td><td valign="top">
<p>
    Character classes that should be included in a token.  Elasticsearch
    will split on characters that don’t belong to the classes specified.
    Defaults to <code class="literal">[]</code> (keep all characters).
</p>
<p>Character classes may be any of the following:</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">letter</code> —      for example <code class="literal">a</code>, <code class="literal">b</code>, <code class="literal">ï</code> or <code class="literal">京</code>
</li><li class="listitem">
<code class="literal">digit</code> —       for example <code class="literal">3</code> or <code class="literal">7</code>
</li><li class="listitem">
<code class="literal">whitespace</code> —  for example <code class="literal">" "</code> or <code class="literal">"\n"</code>
</li><li class="listitem">
<code class="literal">punctuation</code> — for example <code class="literal">!</code> or <code class="literal">"</code>
</li><li class="listitem">
<code class="literal">symbol</code> —      for example <code class="literal">$</code> or <code class="literal">√</code>
</li></ul></div>
</td></tr></tbody></table></div><div xmlns="" class="tip admon"><div class="icon"><img alt="Tip" src="images/icons/tip.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">It usually makes sense to set <code class="literal">min_gram</code> and <code class="literal">max_gram</code> to the same
value.  The smaller the length, the more documents will match but the lower
the quality of the matches.  The longer the length, the more specific the
matches.  A tri-gram (length <code class="literal">3</code>) is a good place to start.</p></div></div><h3><a id="_example_configuration_9"></a>Example configuration<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/analysis/tokenizers/ngram-tokenizer.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>In this example, we configure the <code class="literal">ngram</code> tokenizer to treat letters and
digits as tokens, and to produce tri-grams (grams of length <code class="literal">3</code>):</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT my_index
{
  "settings": {
    "analysis": {
      "analyzer": {
        "my_analyzer": {
          "tokenizer": "my_tokenizer"
        }
      },
      "tokenizer": {
        "my_tokenizer": {
          "type": "ngram",
          "min_gram": 3,
          "max_gram": 3,
          "token_chars": [
            "letter",
            "digit"
          ]
        }
      }
    }
  }
}

POST my_index/_analyze
{
  "analyzer": "my_analyzer",
  "text": "2 Quick Foxes."
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The above example produces the following terms:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">[ Qui, uic, ick, Fox, oxe, xes ]</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="analysis-thai-tokenizer.html">
              « 
              Thai Tokenizer</a>
           
        </span><span class="next">
           
          <a href="analysis-edgengram-tokenizer.html">Edge NGram Tokenizer
               »
            </a></span></div></body></html>