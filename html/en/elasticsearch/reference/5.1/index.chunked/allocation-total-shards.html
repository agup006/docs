<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Total Shards Per Node
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="index-modules-allocation.html" title="Index Shard Allocation" /><link rel="prev" href="recovery-prioritization.html" title="Index recovery prioritization" /><link rel="next" href="index-modules-mapper.html" title="Mapper" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span> » <span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span> » <span class="breadcrumb-node">Total Shards Per Node</span></div><div xmlns="" class="navheader"><span class="prev"><a href="recovery-prioritization.html">
              « 
              Index recovery prioritization</a>
           
        </span><span class="next">
           
          <a href="index-modules-mapper.html">Mapper
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="allocation-total-shards"></a>Total Shards Per Node<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/index-modules/allocation/total_shards.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The cluster-level shard allocator tries to spread the shards of a single index
across as many nodes as possible.  However, depending on how many shards and
indices you have, and how big they are, it may not always be possible to spread
shards evenly.</p><p>The following <span class="emphasis"><em>dynamic</em></span> setting allows you to specify a hard limit on the total
number of shards from a single index allowed per node:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.routing.allocation.total_shards_per_node</code>
</span></dt><dd>
    The maximum number of shards (replicas and primaries) that will be
    allocated to a single node.  Defaults to unbounded.
</dd></dl></div><p>You can also limit the amount of shards a node can have regardless of the index:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.total_shards_per_node</code>
</span></dt><dd>
    The maximum number of shards (replicas and primaries) that will be
    allocated to a single node globally.  Defaults to unbounded (-1).
</dd></dl></div><div xmlns="" class="warning admon"><div class="icon"><img alt="Warning" src="images/icons/warning.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">These settings impose a hard limit which can result in some shards not being
allocated.</p><p xmlns="http://www.w3.org/1999/xhtml">Use with caution.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="recovery-prioritization.html">
              « 
              Index recovery prioritization</a>
           
        </span><span class="next">
           
          <a href="index-modules-mapper.html">Mapper
               »
            </a></span></div></body></html>