<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Explain API
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="search.html" title="Search APIs" /><link rel="prev" href="search-validate.html" title="Validate API" /><link rel="next" href="search-profile.html" title="Profile API" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span> » <span class="breadcrumb-node">Explain API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="search-validate.html">
              « 
              Validate API</a>
           
        </span><span class="next">
           
          <a href="search-profile.html">Profile API
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-explain"></a>Explain API<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/search/explain.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The explain api computes a score explanation for a query and a specific
document. This can give useful feedback whether a document matches or
didn’t match a specific query.</p><p>The <code class="literal">index</code> and <code class="literal">type</code> parameters expect a single index and a single
type respectively.</p><h3><a id="_usage_2"></a>Usage<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/search/explain.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Full query example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /twitter/tweet/0/_explain
{
      "query" : {
        "match" : { "message" : "elasticsearch" }
      }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>This will yield the following result:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "_index" : "twitter",
  "_type" : "tweet",
  "_id" : "0",
  "matched" : true,
  "explanation" : {
    "value" : 1.55077,
    "description" : "sum of:",
    "details" : [ {
      "value" : 1.55077,
      "description" : "weight(message:elasticsearch in 0) [PerFieldSimilarity], result of:",
      "details" : [ {
        "value" : 1.55077,
        "description" : "score(doc=0,freq=1.0 = termFreq=1.0\n), product of:",
        "details" : [ {
          "value" : 1.3862944,
          "description" : "idf(docFreq=1, docCount=5)",
          "details" : [ ]
        }, {
          "value" : 1.1186441,
          "description" : "tfNorm, computed from:",
          "details" : [
            { "value" : 1.0, "description" : "termFreq=1.0", "details" : [ ] },
            { "value" : 1.2, "description" : "parameter k1", "details" : [ ] },
            { "value" : 0.75, "description" : "parameter b", "details" : [ ] },
            { "value" : 5.4, "description" : "avgFieldLength", "details" : [ ] },
            { "value" : 4.0, "description" : "fieldLength", "details" : [ ] }
          ]
        } ]
      } ]
    }, {
      "value" : 0.0,
      "description" : "match on required clause, product of:",
      "details" : [ {
        "value" : 0.0,
        "description" : "# clause",
        "details" : [ ]
      }, {
        "value" : 1.0,
        "description" : "*:*, product of:",
        "details" : [
          { "value" : 1.0, "description" : "boost", "details" : [ ] },
          { "value" : 1.0, "description" : "queryNorm", "details" : [ ] }
        ]
      } ]
    } ]
  }
}</pre></div><p>There is also a simpler way of specifying the query via the <code class="literal">q</code>
parameter. The specified <code class="literal">q</code> parameter value is then parsed as if the
<code class="literal">query_string</code> query was used. Example usage of the <code class="literal">q</code> parameter in the
explain api:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /twitter/tweet/0/_explain?q=message:search</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>This will yield the same result as the previous request.</p><h3><a id="_all_parameters_2"></a>All parameters:<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/search/explain.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="horizontal"><table cellpadding="4px" border="0"><colgroup><col /><col /></colgroup><tbody valign="top"><tr><td valign="top">
<p>
<code class="literal">_source</code>
</p>
</td><td valign="top">
<p>
    Set to <code class="literal">true</code> to retrieve the <code class="literal">_source</code> of the document explained. You can also
    retrieve part of the document by using <code class="literal">_source_include</code> &amp; <code class="literal">_source_exclude</code> (see <a class="link" href="docs-get.html#get-source-filtering" title="Source filteringedit">Get API</a> for more details)
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">stored_fields</code>
</p>
</td><td valign="top">
<p>
    Allows to control which stored fields to return as part of the
    document explained.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td valign="top">
<p>
    Controls the routing in the case the routing was used
    during indexing.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">parent</code>
</p>
</td><td valign="top">
<p>
    Same effect as setting the routing parameter.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">preference</code>
</p>
</td><td valign="top">
<p>
    Controls on which shard the explain is executed.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">source</code>
</p>
</td><td valign="top">
<p>
    Allows the data of the request to be put in the query
    string of the url.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">q</code>
</p>
</td><td valign="top">
<p>
    The query string (maps to the query_string query).
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">df</code>
</p>
</td><td valign="top">
<p>
    The default field to use when no field prefix is defined within
    the query. Defaults to _all field.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td><td valign="top">
<p>
    The analyzer name to be used when analyzing the query
    string. Defaults to the analyzer of the _all field.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">analyze_wildcard</code>
</p>
</td><td valign="top">
<p>
    Should wildcard and prefix queries be analyzed or
    not. Defaults to false.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">lenient</code>
</p>
</td><td valign="top">
<p>
    If set to true will cause format based failures (like
    providing text to a numeric field) to be ignored. Defaults to false.
</p>
</td></tr><tr><td valign="top">
<p>
<code class="literal">default_operator</code>
</p>
</td><td valign="top">
<p>
    The default operator to be used, can be AND or
    OR. Defaults to OR.
</p>
</td></tr></tbody></table></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="search-validate.html">
              « 
              Validate API</a>
           
        </span><span class="next">
           
          <a href="search-profile.html">Profile API
               »
            </a></span></div></body></html>