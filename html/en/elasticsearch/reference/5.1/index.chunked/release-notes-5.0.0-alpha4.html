<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">5.0.0-alpha4 Release Notes
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="es-release-notes.html" title="Release Notes" /><link rel="prev" href="release-notes-5.0.0-alpha5.html" title="5.0.0-alpha5 Release Notes" /><link rel="next" href="release-notes-5.0.0-alpha3.html" title="5.0.0-alpha3 Release Notes" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="es-release-notes.html">Release Notes</a></span> » <span class="breadcrumb-node">5.0.0-alpha4 Release Notes</span></div><div xmlns="" class="navheader"><span class="prev"><a href="release-notes-5.0.0-alpha5.html">
              « 
              5.0.0-alpha5 Release Notes</a>
           
        </span><span class="next">
           
          <a href="release-notes-5.0.0-alpha3.html">5.0.0-alpha3 Release Notes
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="release-notes-5.0.0-alpha4"></a>5.0.0-alpha4 Release Notes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Also see <a class="xref" href="breaking-changes-5.0.html" title="Breaking changes in 5.0"><em>Breaking changes in 5.0</em></a>.</p><div xmlns="" class="important admon"><div class="icon"><img alt="Important" src="images/icons/important.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">This is an alpha release and is intended for <span class="emphasis"><em>testing purposes only</em></span>. Indices created in this version will <span class="strong"><strong>not be compatible with Elasticsearch 5.0.0 GA</strong></span>. Upgrading 5.0.0-alpha4 to any other version is not supported.</p></div></div><h3><a id="breaking-5.0.0-alpha4"></a>Breaking changes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Aggregations
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove size 0 options in aggregations <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18854" target="_top">#18854</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18838" target="_top">#18838</a>)
</li></ul></div></dd><dt><span class="term">
CRUD
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Wait for changes to be visible by search <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/17986" target="_top">#17986</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/1063" target="_top">#1063</a>)
</li></ul></div></dd><dt><span class="term">
Core
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove cluster name from data path <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18554" target="_top">#18554</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17810" target="_top">#17810</a>)
</li></ul></div></dd><dt><span class="term">
Inner Hits
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Also do not serialize <code class="literal">_index</code> key in search response for parent/child inner hits <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19011" target="_top">#19011</a>
</li><li class="listitem">
Don’t include <code class="literal">_id</code>, <code class="literal">_type</code> and <code class="literal">_index</code> keys in search response for inner hits <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18995" target="_top">#18995</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18091" target="_top">#18091</a>)
</li><li class="listitem">
Nested inner hits shouldn’t use relative paths <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18567" target="_top">#18567</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16653" target="_top">#16653</a>)
</li></ul></div></dd><dt><span class="term">
Mapping
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove <code class="literal">_timestamp</code> and <code class="literal">_ttl</code> on 5.x indices. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18980" target="_top">#18980</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18280" target="_top">#18280</a>)
</li></ul></div></dd><dt><span class="term">
Packaging
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove allow running as root <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18694" target="_top">#18694</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18688" target="_top">#18688</a>)
</li></ul></div></dd><dt><span class="term">
Search
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove only node preference <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18875" target="_top">#18875</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18822" target="_top">#18822</a>)
</li><li class="listitem">
Add search preference to prefer multiple nodes <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18872" target="_top">#18872</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18822" target="_top">#18822</a>)
</li></ul></div></dd><dt><span class="term">
Settings
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Rename boostrap.mlockall to bootstrap.memory_lock <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18669" target="_top">#18669</a>
</li></ul></div></dd><dt><span class="term">
Snapshot/Restore
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Change the default of <code class="literal">include_global_state</code> from true to false for snapshot restores <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18773" target="_top">#18773</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18569" target="_top">#18569</a>)
</li></ul></div></dd></dl></div><h3><a id="_breaking_java_changes"></a>Breaking Java changes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Core
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Register thread pool settings <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18674" target="_top">#18674</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18613" target="_top">#18613</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9216" target="_top">#9216</a>)
</li></ul></div></dd><dt><span class="term">
Highlighting
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Register Highlighter instances instead of classes <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18859" target="_top">#18859</a>
</li></ul></div></dd><dt><span class="term">
Internal
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Cleanup ClusterService dependencies and detached from Guice <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18941" target="_top">#18941</a>
</li><li class="listitem">
Simplify SubFetchPhase interface <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18881" target="_top">#18881</a>
</li><li class="listitem">
Simplify FetchSubPhase registration and detach it from Guice <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18862" target="_top">#18862</a>
</li></ul></div></dd><dt><span class="term">
Java API
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove setRefresh <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18752" target="_top">#18752</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/1063" target="_top">#1063</a>)
</li></ul></div></dd><dt><span class="term">
Plugins
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fail to start if plugin tries broken onModule <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19025" target="_top">#19025</a>
</li><li class="listitem">
Simplify ScriptModule and script registration <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18903" target="_top">#18903</a>
</li><li class="listitem">
Cut over settings registration to a pull model <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18890" target="_top">#18890</a>
</li><li class="listitem">
Plugins cleanup <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18594" target="_top">#18594</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18588" target="_top">#18588</a>)
</li></ul></div></dd><dt><span class="term">
Scripting
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Move search template to lang-mustache module <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18765" target="_top">#18765</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17906" target="_top">#17906</a>)
</li></ul></div></dd></dl></div><h3><a id="feature-5.0.0-alpha4"></a>New features<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Aggregations
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Adds aggregation profiling to the profile API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18414" target="_top">#18414</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10538" target="_top">#10538</a>)
</li><li class="listitem">
New Matrix Stats Aggregation module <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18300" target="_top">#18300</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16826" target="_top">#16826</a>)
</li></ul></div></dd><dt><span class="term">
Index APIs
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add rollover API to switch index aliases given some predicates <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18732" target="_top">#18732</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18647" target="_top">#18647</a>)
</li></ul></div></dd><dt><span class="term">
Java REST Client
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Low level Rest Client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18735" target="_top">#18735</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/7743" target="_top">#7743</a>)
</li></ul></div></dd><dt><span class="term">
Mapping
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Expose half-floats. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18887" target="_top">#18887</a>
</li></ul></div></dd><dt><span class="term">
Scroll
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add the ability to partition a scroll in multiple slices. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18237" target="_top">#18237</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/13494" target="_top">#13494</a>)
</li></ul></div></dd><dt><span class="term">
Store
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Expose MMapDirectory.preLoad(). <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18880" target="_top">#18880</a>
</li><li class="listitem">
Add primitive to shrink an index into a single shard <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18270" target="_top">#18270</a>
</li></ul></div></dd></dl></div><h3><a id="enhancement-5.0.0-alpha4"></a>Enhancements<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Aggregations
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Automatically set the collection mode to breadth_first in the terms aggregation when the cardinality of the field is unknown or smaller than the requested size. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18779" target="_top">#18779</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9825" target="_top">#9825</a>)
</li><li class="listitem">
Rename PipelineAggregatorBuilder to PipelineAggregationBuilder. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18677" target="_top">#18677</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18377" target="_top">#18377</a>)
</li><li class="listitem">
AggregatorBuilder and PipelineAggregatorBuilder do not need generics. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18368" target="_top">#18368</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18133" target="_top">#18133</a>)
</li></ul></div></dd><dt><span class="term">
Allocation
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Allow <code class="literal">_shrink</code> to N shards if source shards is a multiple of N <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18699" target="_top">#18699</a>
</li><li class="listitem">
Only filter intial recovery (post API) when shrinking an index <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18661" target="_top">#18661</a>
</li><li class="listitem">
Estimate shard size for shrinked indices <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18659" target="_top">#18659</a>
</li><li class="listitem">
Only fail relocation target shard if failing source shard is a primary <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18574" target="_top">#18574</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16144" target="_top">#16144</a>)
</li><li class="listitem">
Simplify delayed shard allocation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18351" target="_top">#18351</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18293" target="_top">#18293</a>)
</li></ul></div></dd><dt><span class="term">
Analysis
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add a MultiTermAwareComponent marker interface to analysis factories. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19028" target="_top">#19028</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18064" target="_top">#18064</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9978" target="_top">#9978</a>)
</li><li class="listitem">
Add Flags Parameter for Char Filter <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18363" target="_top">#18363</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18362" target="_top">#18362</a>)
</li></ul></div></dd><dt><span class="term">
Cache
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Cache FieldStats in the request cache <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18768" target="_top">#18768</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18717" target="_top">#18717</a>)
</li></ul></div></dd><dt><span class="term">
Cluster
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Index creation does not cause the cluster health to go RED <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18737" target="_top">#18737</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9106" target="_top">#9106</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/9126" target="_top">#9126</a>)
</li><li class="listitem">
Cluster Health class improvements <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18673" target="_top">#18673</a>
</li></ul></div></dd><dt><span class="term">
Core
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Read Elasticsearch manifest via URL <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18999" target="_top">#18999</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18996" target="_top">#18996</a>)
</li><li class="listitem">
Throw if the local node is not set <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18963" target="_top">#18963</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18962" target="_top">#18962</a>)
</li><li class="listitem">
Improve performance of applyDeletedShards <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18788" target="_top">#18788</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18776" target="_top">#18776</a>)
</li><li class="listitem">
Bootstrap check for OnOutOfMemoryError and seccomp <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18756" target="_top">#18756</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18736" target="_top">#18736</a>)
</li></ul></div></dd><dt><span class="term">
Dates
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Improve TimeZoneRoundingTests error messages <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18895" target="_top">#18895</a>
</li><li class="listitem">
Improve TimeUnitRounding for edge cases and DST transitions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18589" target="_top">#18589</a>
</li></ul></div></dd><dt><span class="term">
Expressions
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
improve date api for expressions/painless fields <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18658" target="_top">#18658</a>
</li></ul></div></dd><dt><span class="term">
Index APIs
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add Shrink request source parser to parse create index request body <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18802" target="_top">#18802</a>
</li></ul></div></dd><dt><span class="term">
Index Templates
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Parse and validate mappings on index template creation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/8802" target="_top">#8802</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/2415" target="_top">#2415</a>)
</li></ul></div></dd><dt><span class="term">
Ingest
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add <code class="literal">ignore_failure</code> option to all ingest processors <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18650" target="_top">#18650</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18493" target="_top">#18493</a>)
</li><li class="listitem">
new ScriptProcessor for Ingest <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18193" target="_top">#18193</a>
</li></ul></div></dd><dt><span class="term">
Internal
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Hot methods redux <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19016" target="_top">#19016</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16725" target="_top">#16725</a>)
</li><li class="listitem">
Remove forked joda time BaseDateTime class <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18953" target="_top">#18953</a>
</li><li class="listitem">
Support optional ctor args in ConstructingObjectParser <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18725" target="_top">#18725</a>
</li><li class="listitem">
Remove thread pool from page cache recycler <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18664" target="_top">#18664</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18613" target="_top">#18613</a>)
</li></ul></div></dd><dt><span class="term">
Java API
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Switch QueryBuilders to new MatchPhraseQueryBuilder <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18753" target="_top">#18753</a>
</li></ul></div></dd><dt><span class="term">
Logging
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Throw IllegalStateException when handshake fails due to version or cluster mismatch <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18676" target="_top">#18676</a>
</li></ul></div></dd><dt><span class="term">
Mapping
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Upgrade <code class="literal">string</code> fields to <code class="literal">text</code>/<code class="literal">keyword</code> even if <code class="literal">include_in_all</code> is set. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19004" target="_top">#19004</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18974" target="_top">#18974</a>)
</li></ul></div></dd><dt><span class="term">
Network
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Exclude admin / diagnostic requests from HTTP request limiting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18833" target="_top">#18833</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17951" target="_top">#17951</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18145" target="_top">#18145</a>)
</li><li class="listitem">
Do not start scheduled pings until transport start <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18702" target="_top">#18702</a>
</li></ul></div></dd><dt><span class="term">
Packaging
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove explicit parallel new GC flag <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18767" target="_top">#18767</a>
</li><li class="listitem">
Use JAVA_HOME or java.exe in PATH like the Linux scripts do <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18685" target="_top">#18685</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/4913" target="_top">#4913</a>)
</li></ul></div></dd><dt><span class="term">
Percolator
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add percolator query extraction support for dismax query <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18845" target="_top">#18845</a>
</li><li class="listitem">
Improve percolate query performance by not verifying certain candidate matches <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18696" target="_top">#18696</a>
</li><li class="listitem">
Improve percolator query term extraction <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18610" target="_top">#18610</a>
</li></ul></div></dd><dt><span class="term">
Plugin Lang Painless
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Painless Initializers <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19012" target="_top">#19012</a>
</li><li class="listitem">
Add augmentation <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19003" target="_top">#19003</a>
</li><li class="listitem">
Infer lambda arguments/return type <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18983" target="_top">#18983</a>
</li><li class="listitem">
Fix explicit casts and improve tests. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18958" target="_top">#18958</a>
</li><li class="listitem">
Add lambda captures <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18954" target="_top">#18954</a>
</li><li class="listitem">
improve Debugger to print code even if it hits exception <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18932" target="_top">#18932</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/1" target="_top">#1</a>)
</li><li class="listitem">
Move semicolon hack into lexer <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18931" target="_top">#18931</a>
</li><li class="listitem">
Add flag support to regexes <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18927" target="_top">#18927</a>
</li><li class="listitem">
improve lambda syntax (allow single expression) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18924" target="_top">#18924</a>
</li><li class="listitem">
Remove useless dropArguments in megamorphic cache <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18913" target="_top">#18913</a>
</li><li class="listitem">
non-capturing lambda support <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18911" target="_top">#18911</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18824" target="_top">#18824</a>)
</li><li class="listitem">
fix bugs in operators and more improvements for the dynamic case <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18899" target="_top">#18899</a>
</li><li class="listitem">
improve unary operators and cleanup tests <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18867" target="_top">#18867</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18849" target="_top">#18849</a>)
</li><li class="listitem">
Add support for the find operator (=<sub>) and the match operator (==</sub>) <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18858" target="_top">#18858</a>
</li><li class="listitem">
Remove casts and boxing for dynamic math <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18849" target="_top">#18849</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18847" target="_top">#18847</a>)
</li><li class="listitem">
Refactor def math <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18847" target="_top">#18847</a>
</li><li class="listitem">
Add support for /regex/ <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18842" target="_top">#18842</a>
</li><li class="listitem">
Array constructor references <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18831" target="_top">#18831</a>
</li><li class="listitem">
Method references to user functions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18828" target="_top">#18828</a>
</li><li class="listitem">
Add } as a delimiter.  <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18827" target="_top">#18827</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18821" target="_top">#18821</a>)
</li><li class="listitem">
Add Lambda Stub Node <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18824" target="_top">#18824</a>
</li><li class="listitem">
Add capturing method references <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18818" target="_top">#18818</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18748" target="_top">#18748</a>)
</li><li class="listitem">
Add Functions to Painless <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18810" target="_top">#18810</a>
</li><li class="listitem">
Add Method to Get New MethodWriters <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18771" target="_top">#18771</a>
</li><li class="listitem">
Static For Each <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18757" target="_top">#18757</a>
</li><li class="listitem">
Method reference support <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18748" target="_top">#18748</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18578" target="_top">#18578</a>)
</li><li class="listitem">
Add support for the new Java 9 MethodHandles#arrayLength() factory <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18734" target="_top">#18734</a>
</li><li class="listitem">
Improve painless compile-time exceptions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18711" target="_top">#18711</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18600" target="_top">#18600</a>)
</li><li class="listitem">
add java.time packages to painless whitelist <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18621" target="_top">#18621</a>
</li><li class="listitem">
Add Function Reference Stub to Painless <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18578" target="_top">#18578</a>
</li></ul></div></dd><dt><span class="term">
Plugins
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add did-you-mean for plugin cli <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18942" target="_top">#18942</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18896" target="_top">#18896</a>)
</li><li class="listitem">
Plugins: Remove name() and description() from api <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18906" target="_top">#18906</a>
</li><li class="listitem">
Emit nicer error message when trying to install unknown plugin <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18876" target="_top">#18876</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17226" target="_top">#17226</a>)
</li></ul></div></dd><dt><span class="term">
Query DSL
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Treat zero token in <code class="literal">common</code> terms query as MatchNoDocsQuery <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18656" target="_top">#18656</a>
</li><li class="listitem">
Handle empty query bodies at parse time and remove EmptyQueryBuilder <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/17624" target="_top">#17624</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17540" target="_top">#17540</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17541" target="_top">#17541</a>)
</li></ul></div></dd><dt><span class="term">
REST
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Adding status field in _msearch error request bodies <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18586" target="_top">#18586</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18013" target="_top">#18013</a>)
</li></ul></div></dd><dt><span class="term">
Recovery
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
index shard should be able to cancel check index on close. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18839" target="_top">#18839</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/12011" target="_top">#12011</a>)
</li></ul></div></dd><dt><span class="term">
Reindex API
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Implement ctx.op = "delete" on _update_by_query and _reindex <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18614" target="_top">#18614</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18043" target="_top">#18043</a>)
</li></ul></div></dd><dt><span class="term">
Scripting
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Compile each Groovy script in its own classloader <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18918" target="_top">#18918</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18572" target="_top">#18572</a>)
</li><li class="listitem">
Include script field even if it value is null <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18384" target="_top">#18384</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16408" target="_top">#16408</a>)
</li></ul></div></dd><dt><span class="term">
Scroll
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add an index setting to limit the maximum number of slices allowed in a scroll request. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18782" target="_top">#18782</a>
</li></ul></div></dd><dt><span class="term">
Search
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Change default similarity to BM25 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18948" target="_top">#18948</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18944" target="_top">#18944</a>)
</li><li class="listitem">
Add a parameter to cap the number of searches the msearch api will concurrently execute <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18721" target="_top">#18721</a>
</li></ul></div></dd><dt><span class="term">
Sequence IDs
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Persist sequence number checkpoints <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18949" target="_top">#18949</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/10708" target="_top">#10708</a>)
</li><li class="listitem">
Add sequence numbers to cat shards API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18772" target="_top">#18772</a>
</li></ul></div></dd><dt><span class="term">
Settings
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Improve error message if a setting is not found <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18920" target="_top">#18920</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18663" target="_top">#18663</a>)
</li><li class="listitem">
Cleanup placeholder replacement <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/17335" target="_top">#17335</a>
</li></ul></div></dd><dt><span class="term">
Snapshot/Restore
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Adds UUIDs to snapshots <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18228" target="_top">#18228</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18156" target="_top">#18156</a>)
</li><li class="listitem">
Clarify the semantics of the BlobContainer interface <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18157" target="_top">#18157</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/15580" target="_top">#15580</a>)
</li></ul></div></dd><dt><span class="term">
Stats
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add total_indexing_buffer/_in_bytes to nodes info API <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18914" target="_top">#18914</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18651" target="_top">#18651</a>)
</li><li class="listitem">
Allow FieldStatsRequest to disable cache <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18900" target="_top">#18900</a>
</li><li class="listitem">
Remove index_writer_max_memory stat from segment stats <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18651" target="_top">#18651</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/14121" target="_top">#14121</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/7440" target="_top">#7440</a>)
</li><li class="listitem">
Move DocStats under Engine to get more accurate numbers <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18587" target="_top">#18587</a>
</li></ul></div></dd><dt><span class="term">
Task Manager
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fetch result when wait_for_completion <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18905" target="_top">#18905</a>
</li><li class="listitem">
Create get task API that falls back to the .tasks index <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18682" target="_top">#18682</a>
</li><li class="listitem">
Add ability to store results for long running tasks <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/17928" target="_top">#17928</a>
</li></ul></div></dd><dt><span class="term">
Translog
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Beef up Translog testing with random channel exceptions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18997" target="_top">#18997</a>
</li><li class="listitem">
Do not replay into translog on local recovery <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18547" target="_top">#18547</a>
</li></ul></div></dd></dl></div><h3><a id="bug-5.0.0-alpha4"></a>Bug fixes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Allocation
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix recovery throttling to properly handle relocating non-primary shards <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18701" target="_top">#18701</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18640" target="_top">#18640</a>)
</li></ul></div></dd><dt><span class="term">
CAT API
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix merge stats rendering in RestIndicesAction <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18720" target="_top">#18720</a>
</li></ul></div></dd><dt><span class="term">
CRUD
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Squash a race condition in RefreshListeners <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18806" target="_top">#18806</a>
</li></ul></div></dd><dt><span class="term">
Circuit Breakers
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Never trip circuit breaker in liveness request <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18627" target="_top">#18627</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17951" target="_top">#17951</a>)
</li></ul></div></dd><dt><span class="term">
Cluster
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix block checks when no indices are specified <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19047" target="_top">#19047</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/8105" target="_top">#8105</a>)
</li><li class="listitem">
Acknowledge index deletion requests based on standard cluster state acknowledgment <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18602" target="_top">#18602</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/16442" target="_top">#16442</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18558" target="_top">#18558</a>)
</li></ul></div></dd><dt><span class="term">
Core
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Throw exception if using a closed transport client <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18722" target="_top">#18722</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18708" target="_top">#18708</a>)
</li></ul></div></dd><dt><span class="term">
Dates
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix invalid rounding value for TimeIntervalRounding close to DST transitions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18800" target="_top">#18800</a>
</li><li class="listitem">
Fix problem with TimeIntervalRounding on DST end <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18780" target="_top">#18780</a>
</li></ul></div></dd><dt><span class="term">
Expressions
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
replace ScriptException with a better one <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18600" target="_top">#18600</a>
</li></ul></div></dd><dt><span class="term">
Ingest
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix ignore_failure behavior in _simulate?verbose and more cleanup <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18987" target="_top">#18987</a>
</li></ul></div></dd><dt><span class="term">
Internal
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix filtering of node ids for TransportNodesAction <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18634" target="_top">#18634</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18618" target="_top">#18618</a>)
</li></ul></div></dd><dt><span class="term">
Mapping
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Better error message when mapping configures null <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18809" target="_top">#18809</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18803" target="_top">#18803</a>)
</li><li class="listitem">
Process dynamic templates in order. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18638" target="_top">#18638</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18625" target="_top">#18625</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/2401" target="_top">#2401</a>)
</li></ul></div></dd><dt><span class="term">
Packaging
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Remove extra bin/ directory in bin folder <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18630" target="_top">#18630</a>
</li></ul></div></dd><dt><span class="term">
Plugin Lang Painless
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix compound assignment with string concats <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18933" target="_top">#18933</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18929" target="_top">#18929</a>)
</li><li class="listitem">
Fix horrible capture <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18907" target="_top">#18907</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18899" target="_top">#18899</a>)
</li><li class="listitem">
Fix Casting Bug <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18871" target="_top">#18871</a>
</li></ul></div></dd><dt><span class="term">
Query DSL
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Make parsing of bool queries stricter <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19052" target="_top">#19052</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/19034" target="_top">#19034</a>)
</li></ul></div></dd><dt><span class="term">
REST
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Get XContent params from request in Nodes rest actions <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18860" target="_top">#18860</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18794" target="_top">#18794</a>)
</li></ul></div></dd><dt><span class="term">
Reindex API
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix a race condition in reindex’s rethrottle <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18731" target="_top">#18731</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18744" target="_top">#18744</a>)
</li></ul></div></dd><dt><span class="term">
Search
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Require timeout units when parsing query body <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19077" target="_top">#19077</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/19075" target="_top">#19075</a>)
</li><li class="listitem">
Close SearchContext if query rewrite failed <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18727" target="_top">#18727</a>
</li></ul></div></dd><dt><span class="term">
Settings
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Register "cloud.node.auto_attributes" setting in EC2 discovery plugin <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18678" target="_top">#18678</a>
</li></ul></div></dd><dt><span class="term">
Snapshot/Restore
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Better handling of an empty shard’s segments_N file <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18784" target="_top">#18784</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18707" target="_top">#18707</a>)
</li></ul></div></dd><dt><span class="term">
Stats
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix sync flush total shards statistics <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18766" target="_top">#18766</a>
</li></ul></div></dd><dt><span class="term">
Translog
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Fix translog replay multiple operations same doc <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18611" target="_top">#18611</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18547" target="_top">#18547</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18623" target="_top">#18623</a>)
</li></ul></div></dd></dl></div><h3><a id="upgrade-5.0.0-alpha4"></a>Upgrades<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/release-notes/5.0.0-alpha4.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Core
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Upgrade to Lucene 6.1.0. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18926" target="_top">#18926</a>
</li><li class="listitem">
Upgrade to lucene-6.1.0-snapshot-3a57bea. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18786" target="_top">#18786</a>
</li><li class="listitem">
Upgrade to Lucene 6.0.1. <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18648" target="_top">#18648</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/17535" target="_top">#17535</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/28" target="_top">#28</a>)
</li></ul></div></dd><dt><span class="term">
Dates
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Upgrade joda-time to 2.9.4 <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/18609" target="_top">#18609</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/14524" target="_top">#14524</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/18017" target="_top">#18017</a>)
</li></ul></div></dd><dt><span class="term">
Packaging
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Upgrade JNA to 4.2.2 and remove optionality <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/19045" target="_top">#19045</a> (issue: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/13245" target="_top">#13245</a>)
</li></ul></div></dd><dt><span class="term">
Plugin Discovery EC2
</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Update aws sdk to 1.10.69 and add use_throttle_retries repository setting <a class="ulink" href="https://github.com/elastic/elasticsearch/pull/17784" target="_top">#17784</a> (issues: <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/538" target="_top">#538</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/586" target="_top">#586</a>, <a class="ulink" href="https://github.com/elastic/elasticsearch/issues/589" target="_top">#589</a>)
</li></ul></div></dd></dl></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="release-notes-5.0.0-alpha5.html">
              « 
              5.0.0-alpha5 Release Notes</a>
           
        </span><span class="next">
           
          <a href="release-notes-5.0.0-alpha3.html">5.0.0-alpha3 Release Notes
               »
            </a></span></div></body></html>