<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Local Gateway
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="modules.html" title="Modules" /><link rel="prev" href="modules-discovery-zen.html" title="Zen Discovery" /><link rel="next" href="modules-http.html" title="HTTP" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="modules.html">Modules</a></span> » <span class="breadcrumb-node">Local Gateway</span></div><div xmlns="" class="navheader"><span class="prev"><a href="modules-discovery-zen.html">
              « 
              Zen Discovery</a>
           
        </span><span class="next">
           
          <a href="modules-http.html">HTTP
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-gateway"></a>Local Gateway<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/modules/gateway.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The local gateway module stores the cluster state and shard data across full
cluster restarts.</p><pre class="literallayout">The following _static_ settings, which must be set on every master node,
 control how long a freshly elected master should wait before it tries to
 recover the cluster state and the cluster's data:</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">gateway.expected_nodes</code>
</span></dt><dd>
    The number of (data or master) nodes that are expected to be in the cluster.
    Recovery of local shards will start as soon as the expected number of
    nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd><dt><span class="term">
<code class="literal">gateway.expected_master_nodes</code>
</span></dt><dd>
    The number of master nodes that are expected to be in the cluster.
    Recovery of local shards will start as soon as the expected number of
    master nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd><dt><span class="term">
<code class="literal">gateway.expected_data_nodes</code>
</span></dt><dd>
    The number of data nodes that are expected to be in the cluster.
    Recovery of local shards will start as soon as the expected number of
    data nodes have joined the cluster. Defaults to <code class="literal">0</code>
</dd><dt><span class="term">
<code class="literal">gateway.recover_after_time</code>
</span></dt><dd>
    If the expected number of nodes is not achieved, the recovery process waits
    for the configured amount of time before trying to recover regardless.
    Defaults to <code class="literal">5m</code> if one of the <code class="literal">expected_nodes</code> settings is configured.
</dd></dl></div><p>Once the <code class="literal">recover_after_time</code> duration has timed out, recovery will start
as long as the following conditions are met:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">gateway.recover_after_nodes</code>
</span></dt><dd>
    Recover as long as this many data or master nodes have joined the cluster.
</dd><dt><span class="term">
<code class="literal">gateway.recover_after_master_nodes</code>
</span></dt><dd>
    Recover as long as this many master nodes have joined the cluster.
</dd><dt><span class="term">
<code class="literal">gateway.recover_after_data_nodes</code>
</span></dt><dd>
    Recover as long as this many data nodes have joined the cluster.
</dd></dl></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">These settings only take effect on a full cluster restart.</p></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="modules-discovery-zen.html">
              « 
              Zen Discovery</a>
           
        </span><span class="next">
           
          <a href="modules-http.html">HTTP
               »
            </a></span></div></body></html>