<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Aggregation changes
        | Elasticsearch Reference [5.1]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.1]" /><link rel="up" href="breaking-changes-5.0.html" title="Breaking changes in 5.0" /><link rel="prev" href="_path_to_data_on_disk.html" title="Path to data on disk" /><link rel="next" href="breaking_50_scripting.html" title="Script related changes" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.1" /></head><body><div xmlns="" class="page_header">You are looking at documentation for an older release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.1]
    </a></span> » <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span> » <span class="breadcrumb-link"><a href="breaking-changes-5.0.html">Breaking changes in 5.0</a></span> » <span class="breadcrumb-node">Aggregation changes</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_path_to_data_on_disk.html">
              « 
              Path to data on disk</a>
           
        </span><span class="next">
           
          <a href="breaking_50_scripting.html">Script related changes
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="breaking_50_aggregations_changes"></a>Aggregation changes<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/migration/migrate_5_0/aggregations.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_significant_terms_on_numeric_fields"></a>Significant terms on numeric fields<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/migration/migrate_5_0/aggregations.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Numeric fields have been refactored to use a different data structure that
performs better for range queries. However, since this data structure does
not record document frequencies, numeric fields need to fall back to running
queries in order to estimate the number of matching documents in the
background set, which may incur a performance degradation.</p><p>It is recommended to use <a class="link" href="keyword.html" title="Keyword datatype"><code class="literal">keyword</code></a> fields instead, either directly
or through a <a class="link" href="multi-fields.html" title="fields">multi-field</a> if the numeric representation is
still needed for sorting, range queries or numeric aggregations like
<a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation"><code class="literal">stats</code> aggregations</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literal_ip_range_literal_aggregations"></a><code class="literal">ip_range</code> aggregations<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/migration/migrate_5_0/aggregations.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Now that Elasticsearch supports <code class="literal">ipv6</code>, <code class="literal">ip</code> addresses are encoded in the index
using a binary representation rather than a numeric representation. As a
consequence, the output of <code class="literal">ip_range</code> aggregations does not give numeric values
for <code class="literal">from</code> and <code class="literal">to</code> anymore.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_literal_size_0_literal_on_terms_significant_terms_and_geohash_grid_aggregations"></a><code class="literal">size: 0</code> on Terms, Significant Terms and Geohash Grid Aggregations<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/migration/migrate_5_0/aggregations.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p><code class="literal">size: 0</code> is no longer valid for the terms, significant terms and geohash grid
aggregations. Instead a size should be explicitly specified with a number greater
than zero.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_fractional_time_values"></a>Fractional time values<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.1/docs/reference/migration/migrate_5_0/aggregations.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>Fractional time values (e.g., 0.5s) are no longer supported. For example, this means when setting
date histogram intervals "1.5h" will be rejected and should instead be input as "90m".</p></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_path_to_data_on_disk.html">
              « 
              Path to data on disk</a>
           
        </span><span class="next">
           
          <a href="breaking_50_scripting.html">Script related changes
               »
            </a></span></div></body></html>