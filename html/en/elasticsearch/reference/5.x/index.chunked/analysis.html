<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Analysis
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="prev" href="override-default-template.html" title="Override default template" /><link rel="next" href="analyzer-anatomy.html" title="Anatomy of an analyzer" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-node">Analysis</span></div><div xmlns="" class="navheader"><span class="prev"><a href="override-default-template.html">
              « 
              Override default template</a>
           
        </span><span class="next">
           
          <a href="analyzer-anatomy.html">Anatomy of an analyzer
               »
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="analysis"></a>Analysis<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/analysis.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h1></div></div></div><div class="partintro"><div></div><p><span class="emphasis"><em>Analysis</em></span> is the process of converting text, like the body of any email, into
<span class="emphasis"><em>tokens</em></span> or <span class="emphasis"><em>terms</em></span> which are added to the inverted index for searching.
Analysis is performed by an <a class="link" href="analysis-analyzers.html" title="Analyzers"><span class="emphasis"><em>analyzer</em></span></a> which can be
either a built-in analyzer or a <a class="link" href="analysis-custom-analyzer.html" title="Custom Analyzer"><code class="literal">custom</code></a> analyzer
defined per index.</p><h2><a id="_index_time_analysis"></a>Index time analysis<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/analysis.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>For instance at index time, the built-in <a class="link" href="analysis-lang-analyzer.html#english-analyzer" title="english analyzer"><code class="literal">english</code></a> <span class="emphasis"><em>analyzer</em></span> would
convert this sentence:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">"The QUICK brown foxes jumped over the lazy dog!"</pre></div><p>into these terms, which would be added to the inverted index.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">[ quick, brown, fox, jump, over, lazi, dog ]</pre></div><h3><a id="_specifying_an_index_time_analyzer"></a>Specifying an index time analyzer<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/analysis.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Each <a class="link" href="text.html" title="Text datatype"><code class="literal">text</code></a> field in a mapping can specify its own
<a class="link" href="analyzer.html" title="analyzer"><code class="literal">analyzer</code></a>:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT my_index
{
  "mappings": {
    "my_type": {
      "properties": {
        "title": {
          "type":     "text",
          "analyzer": "standard"
        }
      }
    }
  }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>At index time, if no <code class="literal">analyzer</code> has been specified, it looks for an analyzer
in the index settings called <code class="literal">default</code>.  Failing that, it defaults to using
the <a class="link" href="analysis-standard-analyzer.html" title="Standard Analyzer"><code class="literal">standard</code> analyzer</a>.</p><h2><a id="_search_time_analysis"></a>Search time analysis<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/analysis.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2><p>This same analysis process is applied to the query string at search time in
<a class="link" href="full-text-queries.html" title="Full text queries">full text queries</a> like the
<a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a>
to convert the text in the query string into terms of the same form as those
that are stored in the inverted index.</p><p>For instance, a user might search for:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">"a quick fox"</pre></div><p>which would be analysed by the same <code class="literal">english</code> analyzer into the following terms:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-text">[ quick, fox ]</pre></div><p>Even though the exact words used in the query string don’t appear in the
original text (<code class="literal">quick</code> vs <code class="literal">QUICK</code>, <code class="literal">fox</code> vs <code class="literal">foxes</code>), because we have applied
the same analyzer to both the text and the query string, the terms from the
query string exactly match the terms from the text in the inverted index,
which means that this query would match our example document.</p><h3><a id="_specifying_a_search_time_analyzer"></a>Specifying a search time analyzer<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/analysis.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Usually the same analyzer should be used both at
index time and at search time, and <a class="link" href="full-text-queries.html" title="Full text queries">full text queries</a>
like the  <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a> will use the mapping to look
up the analyzer to use for each field.</p><p>The analyzer to use to search a particular field is determined by
looking for:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
An <code class="literal">analyzer</code> specified in the query itself.
</li><li class="listitem">
The <a class="link" href="search-analyzer.html" title="search_analyzer"><code class="literal">search_analyzer</code></a> mapping parameter.
</li><li class="listitem">
The <a class="link" href="analyzer.html" title="analyzer"><code class="literal">analyzer</code></a> mapping parameter.
</li><li class="listitem">
An analyzer in the index settings called <code class="literal">default_search</code>.
</li><li class="listitem">
An analyzer in the index settings called <code class="literal">default</code>.
</li><li class="listitem">
The <code class="literal">standard</code> analyzer.
</li></ul></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="override-default-template.html">
              « 
              Override default template</a>
           
        </span><span class="next">
           
          <a href="analyzer-anatomy.html">Anatomy of an analyzer
               »
            </a></span></div></body></html>