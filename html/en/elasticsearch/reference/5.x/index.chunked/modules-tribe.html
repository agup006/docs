<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Tribe node
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="modules.html" title="Modules" /><link rel="prev" href="modules-transport.html" title="Transport" /><link rel="next" href="modules-cross-cluster-search.html" title="Cross cluster search" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="modules.html">Modules</a></span> » <span class="breadcrumb-node">Tribe node</span></div><div xmlns="" class="navheader"><span class="prev"><a href="modules-transport.html">
              « 
              Transport</a>
           
        </span><span class="next">
           
          <a href="modules-cross-cluster-search.html">Cross cluster search
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-tribe"></a>Tribe node<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/modules/tribe.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>The <span class="emphasis"><em>tribes</em></span> feature allows a <span class="emphasis"><em>tribe node</em></span> to act as a federated client across
multiple clusters.</p><p>The tribe node works by retrieving the cluster state from all connected
clusters and merging them into a global cluster state. With this information
at hand, it is able to perform read and write operations against the nodes in
all clusters as if they were local. Note that a tribe node needs to be able
to connect to each single node in every configured cluster.</p><p>The <code class="literal">elasticsearch.yml</code> config file for a tribe node just needs to list the
clusters that should be joined, for instance:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">tribe:
    t1: <a id="CO295-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span>
        cluster.name:   cluster_one
    t2: <a id="CO295-2"></a><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span>
        cluster.name:   cluster_two</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO295-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> <a href="#CO295-2"><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
<code class="literal">t1</code> and <code class="literal">t2</code> are arbitrary names representing the connection to each
    cluster.
</p></td></tr></table></div><p>The example above configures connections to two clusters, name <code class="literal">t1</code> and <code class="literal">t2</code>
respectively.  The tribe node will create a <a class="link" href="modules-node.html" title="Node">node client</a> to
connect each cluster using <a class="link" href="modules-discovery-zen.html#unicast" title="Unicastedit">unicast discovery</a> by default. Any
other settings for the connection can be configured under <code class="literal">tribe.{name}</code>, just
like the <code class="literal">cluster.name</code> in the example.</p><p>The merged global cluster state means that almost all operations work in the
same way as a single cluster: distributed search, suggest, percolation,
indexing, etc.</p><p>However, there are a few exceptions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The merged view cannot handle indices with the same name in multiple
  clusters. By default it will pick one of them, see later for on_conflict options.
</li><li class="listitem">
Master level read operations (eg <a class="xref" href="cluster-state.html" title="Cluster State"><em>Cluster State</em></a>, <a class="xref" href="cluster-health.html" title="Cluster Health"><em>Cluster Health</em></a>)
  will automatically execute with a local flag set to true since there is
  no master.
</li><li class="listitem">
Master level write operations (eg <a class="xref" href="indices-create-index.html" title="Create Index"><em>Create Index</em></a>) are not
  allowed. These should be performed on a single cluster.
</li></ul></div><p>The tribe node can be configured to block all write operations and all
metadata operations with:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">tribe:
    blocks:
        write:    true
        metadata: true</pre></div><p>The tribe node can also configure blocks on selected indices:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">tribe:
    blocks:
        write.indices:    hk*,ldn*
        metadata.indices: hk*,ldn*</pre></div><p>When there is a conflict and multiple clusters hold the same index, by default
the tribe node will pick one of them. This can be configured using the <code class="literal">tribe.on_conflict</code>
setting. It defaults to <code class="literal">any</code>, but can be set to <code class="literal">drop</code> (drop indices that have
a conflict), or <code class="literal">prefer_[tribeName]</code> to prefer the index from a specific tribe.</p><h3><a id="_tribe_node_settings"></a>Tribe node settings<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/modules/tribe.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>The tribe node starts a node client for each listed cluster.  The following
configuration options are passed down from the tribe node to each node client:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">node.name</code> (used to derive the <code class="literal">node.name</code> for each node client)
</li><li class="listitem">
<code class="literal">network.host</code>
</li><li class="listitem">
<code class="literal">network.bind_host</code>
</li><li class="listitem">
<code class="literal">network.publish_host</code>
</li><li class="listitem">
<code class="literal">transport.host</code>
</li><li class="listitem">
<code class="literal">transport.bind_host</code>
</li><li class="listitem">
<code class="literal">transport.publish_host</code>
</li><li class="listitem">
<code class="literal">path.home</code>
</li><li class="listitem">
<code class="literal">path.conf</code>
</li><li class="listitem">
<code class="literal">path.logs</code>
</li><li class="listitem">
<code class="literal">path.scripts</code>
</li><li class="listitem">
<code class="literal">shield.*</code>
</li></ul></div><p>Almost any setting (except for <code class="literal">path.*</code>) may be configured at the node client
level itself, in which case it will override any passed through setting from
the tribe node.  Settings you may want to set at the node client level
include:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">network.host</code>
</li><li class="listitem">
<code class="literal">network.bind_host</code>
</li><li class="listitem">
<code class="literal">network.publish_host</code>
</li><li class="listitem">
<code class="literal">transport.host</code>
</li><li class="listitem">
<code class="literal">transport.bind_host</code>
</li><li class="listitem">
<code class="literal">transport.publish_host</code>
</li><li class="listitem">
<code class="literal">cluster.name</code>
</li><li class="listitem">
<code class="literal">discovery.zen.ping.unicast.hosts</code>
</li></ul></div><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">path.scripts:   some/path/to/config <a id="CO296-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span>
network.host:   192.168.1.5 <a id="CO296-2"></a><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span>

tribe:
  t1:
    cluster.name:   cluster_one
  t2:
    cluster.name:   cluster_two
    network.host:   10.1.2.3 <a id="CO296-3"></a><span xmlns=""><img src="images/icons/callouts/3.png" alt="" /></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">path.scripts</code> setting is inherited by both <code class="literal">t1</code> and <code class="literal">t2</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-2"><span xmlns=""><img src="images/icons/callouts/2.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">network.host</code> setting is inherited by <code class="literal">t1</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO296-3"><span xmlns=""><img src="images/icons/callouts/3.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
The <code class="literal">t3</code> node client overrides the inherited from the tribe node.
</p></td></tr></table></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="modules-transport.html">
              « 
              Transport</a>
           
        </span><span class="next">
           
          <a href="modules-cross-cluster-search.html">Cross cluster search
               »
            </a></span></div></body></html>