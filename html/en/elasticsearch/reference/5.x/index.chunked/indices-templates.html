<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Index Templates
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="indices.html" title="Indices APIs" /><link rel="prev" href="_explain_analyze.html" title="Explain Analyze" /><link rel="next" href="indices-shadow-replicas.html" title="Shadow replica indices" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span> » <span class="breadcrumb-node">Index Templates</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_explain_analyze.html">
              « 
              Explain Analyze</a>
           
        </span><span class="next">
           
          <a href="indices-shadow-replicas.html">Shadow replica indices
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-templates"></a>Index Templates<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Index templates allow you to define templates that will automatically be
applied when new indices are created. The templates include both settings and
mappings, and a simple pattern template that controls whether the template
should be applied to the new index.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Templates are only applied at index creation time.  Changing a template
will have no impact on existing indices.</p></div></div><p>For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT _template/template_1
{
  "template": "te*",
  "settings": {
    "number_of_shards": 1
  },
  "mappings": {
    "type1": {
      "_source": {
        "enabled": false
      },
      "properties": {
        "host_name": {
          "type": "keyword"
        },
        "created_at": {
          "type": "date",
          "format": "EEE MMM dd HH:mm:ss Z YYYY"
        }
      }
    }
  }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">Index templates provide C-style /* */ block comments. Comments are allowed
everywhere in the JSON document except before the initial opening curly bracket.</p></div></div><p>Defines a template named <code class="literal">template_1</code>, with a template pattern of <code class="literal">te*</code>.
The settings and mappings will be applied to any index name that matches
the <code class="literal">te*</code> pattern.</p><p>It is also possible to include aliases in an index template as follows:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT _template/template_1
{
    "template" : "te*",
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        },
        "{index}-alias" : {} <a id="CO131-1"></a><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span>
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><div class="calloutlist"><table border="0" summary="Callout list"><tr><td width="5%" valign="top" align="left"><p><a href="#CO131-1"><span xmlns=""><img src="images/icons/callouts/1.png" alt="" /></span></a> </p></td><td valign="top" align="left"><p>
the <code class="literal">{index}</code> placeholder in the alias name will be replaced with the
actual index name that the template gets applied to, during index creation.
</p></td></tr></table></div><h3><a id="delete"></a>Deleting a Template<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be deleted as well:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">DELETE /_template/template_1</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h3><a id="getting"></a>Getting templates<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be retrieved using the following:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_template/template_1</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>You can also match several templates by using wildcards like:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_template/temp*
GET /_template/template_1,template_2</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>To get list of all index templates you can run:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_template</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h3><a id="indices-templates-exists"></a>Template exists<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Used to check if the template exists or not. For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">HEAD _template/template_1</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The HTTP status code indicates if the template with the given name
exists or not. Status code <code class="literal">200</code> means it exists and <code class="literal">404</code> means
it does not.</p><h3><a id="multiple-templates"></a>Multiple Templates Matching<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_template/template_1
{
    "template" : "*",
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false }
        }
    }
}

PUT /_template/template_2
{
    "template" : "te*",
    "order" : 1,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : true }
        }
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The above will disable storing the <code class="literal">_source</code> on all <code class="literal">type1</code> types, but
for indices that start with <code class="literal">te*</code>, <code class="literal">_source</code> will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p><h3><a id="versioning-templates"></a>Template Versioning<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/indices/templates.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Templates can optionally add a <code class="literal">version</code> number, which can be any integer value,
in order to simplify template management by external systems. The <code class="literal">version</code>
field is completely optional and it is meant solely for external management of
templates. To unset a <code class="literal">version</code>, simply replace the template without specifying
one.</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_template/template_1
{
    "template" : "*",
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "version": 123
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>To check the <code class="literal">version</code>, you can
<a class="link" href="common-options.html#common-options-response-filtering" title="Response Filteringedit">filter responses</a>
using <code class="literal">filter_path</code> to limit the response to just the <code class="literal">version</code>:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_template/template_1?filter_path=*.version</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>This should give a small response that makes it both easy and inexpensive to parse:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "template_1" : {
    "version" : 123
  }
}</pre></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="_explain_analyze.html">
              « 
              Explain Analyze</a>
           
        </span><span class="next">
           
          <a href="indices-shadow-replicas.html">Shadow replica indices
               »
            </a></span></div></body></html>