<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">The Search API
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="_exploring_your_data.html" title="Exploring Your Data" /><link rel="prev" href="_exploring_your_data.html" title="Exploring Your Data" /><link rel="next" href="_introducing_the_query_language.html" title="Introducing the Query Language" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span> » <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span> » <span class="breadcrumb-node">The Search API</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_exploring_your_data.html">
              « 
              Exploring Your Data</a>
           
        </span><span class="next">
           
          <a href="_introducing_the_query_language.html">Introducing the Query Language
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_the_search_api"></a>The Search API<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/getting-started.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Now let’s start with some simple searches. There are two basic ways to run searches: one is by sending search parameters through the <a class="link" href="search-uri-request.html" title="URI Search">REST request URI</a> and the other by sending them through the <a class="link" href="search-request-body.html" title="Request Body Search">REST request body</a>. The request body method allows you to be more expressive and also to define your searches in a more readable JSON format. We’ll try one example of the request URI method but for the remainder of this tutorial, we will exclusively be using the request body method.</p><p>The REST API for search is accessible from the <code class="literal">_search</code> endpoint. This example returns all documents in the bank index:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /bank/_search?q=*&amp;sort=account_number:asc&amp;pretty</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>Let’s first dissect the search call. We are searching (<code class="literal">_search</code> endpoint) in the bank index, and the <code class="literal">q=*</code> parameter instructs Elasticsearch to match all documents in the index. The <code class="literal">sort=account_number:asc</code> parameter indicates to sort the results using the <code class="literal">account_number</code> field of each document in an ascending order. The <code class="literal">pretty</code> parameter, again, just tells Elasticsearch to return pretty-printed JSON results.</p><p>And the response (partially shown):</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
  "took" : 63,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1000,
    "max_score" : null,
    "hits" : [ {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "0",
      "sort": [0],
      "_score" : null,
      "_source" : {"account_number":0,"balance":16623,"firstname":"Bradshaw","lastname":"Mckenzie","age":29,"gender":"F","address":"244 Columbus Place","employer":"Euron","email":"bradshawmckenzie@euron.com","city":"Hobucken","state":"CO"}
    }, {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "1",
      "sort": [1],
      "_score" : null,
      "_source" : {"account_number":1,"balance":39225,"firstname":"Amber","lastname":"Duke","age":32,"gender":"M","address":"880 Holmes Lane","employer":"Pyrami","email":"amberduke@pyrami.com","city":"Brogan","state":"IL"}
    }, ...
    ]
  }
}</pre></div><p>As for the response, we see the following parts:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">took</code> – time in milliseconds for Elasticsearch to execute the search
</li><li class="listitem">
<code class="literal">timed_out</code> – tells us if the search timed out or not
</li><li class="listitem">
<code class="literal">_shards</code> – tells us how many shards were searched, as well as a count of the successful/failed searched shards
</li><li class="listitem">
<code class="literal">hits</code> – search results
</li><li class="listitem">
<code class="literal">hits.total</code> – total number of documents matching our search criteria
</li><li class="listitem">
<code class="literal">hits.hits</code> – actual array of search results (defaults to first 10 documents)
</li><li class="listitem">
<code class="literal">hits.sort</code> - sort key for results (missing if sorting by score)
</li><li class="listitem">
<code class="literal">hits._score</code> and <code class="literal">max_score</code> - ignore these fields for now
</li></ul></div><p>Here is the same exact search above using the alternative request body method:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /bank/_search
{
  "query": { "match_all": {} },
  "sort": [
    { "account_number": "asc" }
  ]
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The difference here is that instead of passing <code class="literal">q=*</code> in the URI, we POST a JSON-style query request body to the <code class="literal">_search</code> API. We’ll discuss this JSON query in the next section.</p><p>It is important to understand that once you get your search results back, Elasticsearch is completely done with the request and does not maintain any kind of server-side resources or open cursors into your results. This is in stark contrast to many other platforms such as SQL wherein you may initially get a partial subset of your query results up-front and then you have to continuously go back to the server if you want to fetch (or page through) the rest of the results using some kind of stateful server-side cursor.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="_exploring_your_data.html">
              « 
              Exploring Your Data</a>
           
        </span><span class="next">
           
          <a href="_introducing_the_query_language.html">Introducing the Query Language
               »
            </a></span></div></body></html>