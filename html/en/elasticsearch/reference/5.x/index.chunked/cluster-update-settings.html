<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Cluster Update Settings
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="cluster.html" title="Cluster APIs" /><link rel="prev" href="cluster-reroute.html" title="Cluster Reroute" /><link rel="next" href="cluster-nodes-stats.html" title="Nodes Stats" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span> » <span class="breadcrumb-node">Cluster Update Settings</span></div><div xmlns="" class="navheader"><span class="prev"><a href="cluster-reroute.html">
              « 
              Cluster Reroute</a>
           
        </span><span class="next">
           
          <a href="cluster-nodes-stats.html">Nodes Stats
               »
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-update-settings"></a>Cluster Update Settings<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/cluster/update-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>Allows to update cluster wide specific settings. Settings updated can
either be persistent (applied cross restarts) or transient (will not
survive a full cluster restart). Here is an example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings
{
    "persistent" : {
        "indices.recovery.max_bytes_per_sec" : "50mb"
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>Or:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings?flat_settings=true
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : "20mb"
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>The cluster responds with the settings updated. So the response for the
last example will be:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
    ...
    "persistent" : { },
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : "20mb"
    }
}</pre></div><p>Resetting persistent or transient settings can be done by assigning a
<code class="literal">null</code> value. If a transient setting is reset, the persistent setting
is applied if available. Otherwise Elasticsearch will fallback to the setting
defined at the configuration file or, if not existent, to the default
value. Here is an example:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.max_bytes_per_sec" : null
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>Reset settings will not be included in the cluster response. So
the response for the last example will be:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">{
    ...
    "persistent" : {},
    "transient" : {}
}</pre></div><p>Settings can also be reset using simple wildcards. For instance to reset
all dynamic <code class="literal">indices.recovery</code> setting a prefix can be used:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">PUT /_cluster/settings
{
    "transient" : {
        "indices.recovery.*" : null
    }
}</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><p>Cluster wide settings can be returned using:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-js">GET /_cluster/settings</pre></div><div xmlns="" class="console_widget" data-snippet=":CONSOLE:"></div><h3><a id="_precedence_of_settings"></a>Precedence of settings<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/cluster/update-settings.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3><p>Transient cluster settings take precedence over persistent cluster settings,
which take precedence over settings configured in the <code class="literal">elasticsearch.yml</code>
config file.</p><p>For this reason it is preferrable to  use the <code class="literal">elasticsearch.yml</code> file only
for local configurations, and set all cluster-wider settings with the
<code class="literal">settings</code> API.</p><p>A list of dynamically updatable settings can be found in the
<a class="link" href="modules.html" title="Modules">Modules</a> documentation.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="cluster-reroute.html">
              « 
              Cluster Reroute</a>
           
        </span><span class="next">
           
          <a href="cluster-nodes-stats.html">Nodes Stats
               »
            </a></span></div></body></html>