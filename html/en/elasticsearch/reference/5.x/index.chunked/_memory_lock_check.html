<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Memory lock check
        | Elasticsearch Reference [5.x]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Elasticsearch Reference [5.x]" /><link rel="up" href="bootstrap-checks.html" title="Bootstrap Checks" /><link rel="prev" href="_file_descriptor_check.html" title="File descriptor check" /><link rel="next" href="_maximum_number_of_threads_check.html" title="Maximum number of threads check" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Elasticsearch/Reference/5.x" /></head><body><div xmlns="" class="page_header">You are looking at preliminary documentation for a future release.
Not what you want? See the
<a href="../current/index.html">current release documentation</a>.
</div><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [5.x]
    </a></span> » <span class="breadcrumb-link"><a href="setup.html">Setup Elasticsearch</a></span> » <span class="breadcrumb-link"><a href="bootstrap-checks.html">Bootstrap Checks</a></span> » <span class="breadcrumb-node">Memory lock check</span></div><div xmlns="" class="navheader"><span class="prev"><a href="_file_descriptor_check.html">
              « 
              File descriptor check</a>
           
        </span><span class="next">
           
          <a href="_maximum_number_of_threads_check.html">Maximum number of threads check
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_memory_lock_check"></a>Memory lock check<a xmlns="" href="https://github.com/elastic/elasticsearch/edit/5.x/docs/reference/setup/bootstrap-checks.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>When the JVM does a major garbage collection it touches every page of
the heap. If any of those pages are swapped out to disk they will have
to be swapped back in to memory. That causes lots of disk thrashing that
Elasticsearch would much rather use to service requests. There are
several ways to configure a system to disallow swapping. One way is by
requesting the JVM to lock the heap in memory through <code class="literal">mlockall</code> (Unix)
or virtual lock (Windows). This is done via the Elasticsearch setting
<a class="link" href="important-settings.html#bootstrap.memory_lock" title="bootstrap.memory_lockedit"><code class="literal">bootstrap.memory_lock</code></a>. However, there are cases
where this setting can be passed to Elasticsearch but Elasticsearch is
not able to lock the heap (e.g., if the <code class="literal">elasticsearch</code> user does not
have <code class="literal">memlock unlimited</code>). The memory lock check verifies that <span class="strong"><strong>if</strong></span> the
<code class="literal">bootstrap.memory_lock</code> setting is enabled, that the JVM was successfully
able to lock the heap. To pass the memory lock check, you might have to
configure <a class="link" href="setup-configuration-memory.html#mlockall" title="Enable bootstrap.memory_lock"><code class="literal">mlockall</code></a>.</p></div><div xmlns="" class="navfooter"><span class="prev"><a href="_file_descriptor_check.html">
              « 
              File descriptor check</a>
           
        </span><span class="next">
           
          <a href="_maximum_number_of_threads_check.html">Maximum number of threads check
               »
            </a></span></div></body></html>