<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns="">Step 3: Loading the Index Template in Elasticsearch
        | Metricbeat Reference [5.3]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1" /><link rel="home" href="index.html" title="Metricbeat Reference [5.3]" /><link rel="up" href="metricbeat-getting-started.html" title="Getting Started With Metricbeat" /><link rel="prev" href="metricbeat-configuration.html" title="Step 2: Configuring Metricbeat" /><link rel="next" href="metricbeat-starting.html" title="Step 4: Starting Metricbeat" /><meta xmlns="" name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients." /><meta xmlns="" name="DC.type" content="Docs/Metricbeat/Reference/5.3" /></head><body><div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Metricbeat Reference
      [5.3]
    </a></span> » <span class="breadcrumb-link"><a href="metricbeat-getting-started.html">Getting Started With Metricbeat</a></span> » <span class="breadcrumb-node">Step 3: Loading the Index Template in Elasticsearch</span></div><div xmlns="" class="navheader"><span class="prev"><a href="metricbeat-configuration.html">
              « 
              Step 2: Configuring Metricbeat</a>
           
        </span><span class="next">
           
          <a href="metricbeat-starting.html">Step 4: Starting Metricbeat
               »
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="metricbeat-template"></a>Step 3: Loading the Index Template in Elasticsearch<a xmlns="" href="https://github.com/elastic/beats/edit/5.3/metricbeat/docs/gettingstarted.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h2></div></div></div><p>In Elasticsearch, <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/5.3/indices-templates.html" target="_top">index
templates</a> are used to define settings and mappings that determine how fields should be analyzed.</p><p>The recommended index template file for Metricbeat is installed by the Metricbeat packages. If you accept
the default configuration for template loading in the <code class="literal">metricbeat.yml</code> config file,
Metricbeat loads the template automatically after successfully connecting to Elasticsearch. If the template
already exists, it’s not overwritten unless you configure Metricbeat to do so.</p><p>If you want to disable automatic template loading, or you want to load your own template,
you can change the settings for template loading in the Metricbeat configuration file. If you
choose to disable automatic template loading, you need to load the template manually.
For more information, see:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="metricbeat-template.html#load-template-auto" title="Configuring Template Loading">Configuring Template Loading</a> - supported for Elasticsearch output only
</li><li class="listitem">
<a class="xref" href="metricbeat-template.html#load-template-manually" title="Loading the Template Manually">Loading the Template Manually</a> - required for Logstash output
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="load-template-auto"></a>Configuring Template Loading<a xmlns="" href="https://github.com/elastic/beats/edit/5.3/libbeat/docs/shared-template-load.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>By default, Metricbeat automatically loads the recommended template file, <code class="literal">metricbeat.template.json</code>,
if Elasticsearch output is enabled. You can configure metricbeat to load a different template
by adjusting the <code class="literal">template.name</code> and <code class="literal">template.path</code> options in <code class="literal">metricbeat.yml</code> file:</p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-yaml">output.elasticsearch:
  hosts: ["localhost:9200"]
  template.name: "metricbeat"
  template.path: "metricbeat.template.json"
  template.overwrite: false</pre></div><p>By default, if a template already exists in the index, it is not overwritten. To overwrite an existing
template, set <code class="literal">template.overwrite: true</code> in the configuration file.</p><p>To disable automatic template loading, comment out the template part under the Elasticsearch output.</p><p>The options for auto loading the template are not supported if you are using the
Logstash output.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="load-template-manually"></a>Loading the Template Manually<a xmlns="" href="https://github.com/elastic/beats/edit/5.3/libbeat/docs/shared-template-load.asciidoc" class="edit_me" title="Edit this page on GitHub" rel="nofollow">edit</a></h3></div></div></div><p>If you disable automatic template loading, you need to run the following command to load the template:</p><p><span class="strong"><strong>deb or rpm:</strong></span></p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -H 'Content-Type: application/json' -XPUT 'http://localhost:9200/_template/metricbeat' -d@/etc/metricbeat/metricbeat.template.json</pre></div><p><span class="strong"><strong>mac:</strong></span></p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">cd metricbeat-5.3.1-darwin-x86_64
curl -H 'Content-Type: application/json' -XPUT 'http://localhost:9200/_template/metricbeat' -d@metricbeat.template.json</pre></div><p><span class="strong"><strong>win:</strong></span></p><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">PS C:\Program Files\Metricbeat&gt; Invoke-WebRequest -Method Put -InFile metricbeat.template.json -Uri  http://localhost:9200/_template/metricbeat?pretty -ContentType application/json</pre></div><p>where <code class="literal">localhost:9200</code> is the IP and port where Elasticsearch is listening.</p><div xmlns="" class="note admon"><div class="icon"><img alt="Note" src="images/icons/note.png" /></div><div class="admon_content"><p xmlns="http://www.w3.org/1999/xhtml">If you’ve already used Metricbeat to index data into Elasticsearch,
the index may contain old documents. After you load the index template,
you can delete the old documents from metricbeat-* to force Kibana to look
at the newest documents. Use this command:</p></div></div><div xmlns="" class="pre_wrapper"><pre xmlns="http://www.w3.org/1999/xhtml" class="programlisting prettyprint lang-sh">curl -XDELETE 'http://localhost:9200/metricbeat-*'</pre></div></div></div><div xmlns="" class="navfooter"><span class="prev"><a href="metricbeat-configuration.html">
              « 
              Step 2: Configuring Metricbeat</a>
           
        </span><span class="next">
           
          <a href="metricbeat-starting.html">Step 4: Starting Metricbeat
               »
            </a></span></div></body></html>